{"version":3,"sources":["../src/client.ts"],"sourcesContent":["//src/client.ts\r\n\r\nimport axios, { AxiosInstance } from \"axios\";\r\n\r\nexport interface JipupClientOptions {\r\n  baseURL?: string; // mặc định = prod\r\n}\r\n\r\nexport class JipupClient {\r\n  private api: AxiosInstance;\r\n\r\n  constructor(options: JipupClientOptions = {}) {\r\n    this.api = axios.create({\r\n      baseURL: options.baseURL ?? \"https://jipupapi.onrender.com\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n  }\r\n\r\n  // ========== Health ==========\r\n  async health() {\r\n    const res = await this.api.get(\"/healthz\");\r\n    return res.data;\r\n  }\r\n\r\n  // ========== Users ==========\r\n  async registerUser(data: { telegramId: string; username?: string; referrerId?: string }) {\r\n    const res = await this.api.post(\"/user/register\", data);\r\n    return res.data;\r\n  }\r\n\r\n  async getUserById(id: string) {\r\n    const res = await this.api.get(`/user/${id}`);\r\n    return res.data;\r\n  }\r\n\r\n  async getUserByTelegram(telegramId: string) {\r\n    const res = await this.api.get(`/user/by-telegram/${telegramId}`);\r\n    return res.data;\r\n  }\r\n\r\n  // ========== Tasks ==========\r\n  async listTasks(params?: { type?: string; includeInactive?: boolean }) {\r\n    const res = await this.api.get(\"/tasks\", { params });\r\n    return res.data;\r\n  }\r\n\r\n  async completeTask(data: { userId: string; taskId: string; date?: string }) {\r\n    const res = await this.api.post(\"/tasks/complete\", data);\r\n    return res.data;\r\n  }\r\n\r\n  async getTaskProgress(userId: string, limit = 50) {\r\n    const res = await this.api.get(`/tasks/progress/${userId}`, { params: { limit } });\r\n    return res.data;\r\n  }\r\n\r\n  // ========== Items ==========\r\n  async listItems(activeOnly = true) {\r\n    const res = await this.api.get(\"/items\", { params: { activeOnly } });\r\n    return res.data;\r\n  }\r\n\r\n  async buyItem(data: { userId: string; itemId: string; amount: number }) {\r\n    const res = await this.api.post(\"/items/buy\", data);\r\n    return res.data;\r\n  }\r\n\r\n  async getInventory(userId: string) {\r\n    const res = await this.api.get(`/inventory/${userId}`);\r\n    return res.data;\r\n  }\r\n\r\n  // ========== Claims ==========\r\n  async createClaim(data: { userId: string; amount: number }) {\r\n    const res = await this.api.post(\"/claim\", data);\r\n    return res.data;\r\n  }\r\n\r\n  async getClaims(userId: string) {\r\n    const res = await this.api.get(`/claim/${userId}`);\r\n    return res.data;\r\n  }\r\n}\r\n"],"mappings":";AAEA,OAAO,WAA8B;AAM9B,IAAM,cAAN,MAAkB;AAAA,EAGvB,YAAY,UAA8B,CAAC,GAAG;AAC5C,SAAK,MAAM,MAAM,OAAO;AAAA,MACtB,SAAS,QAAQ,WAAW;AAAA,MAC5B,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,IAChD,CAAC;AAAA,EACH;AAAA;AAAA,EAGA,MAAM,SAAS;AACb,UAAM,MAAM,MAAM,KAAK,IAAI,IAAI,UAAU;AACzC,WAAO,IAAI;AAAA,EACb;AAAA;AAAA,EAGA,MAAM,aAAa,MAAsE;AACvF,UAAM,MAAM,MAAM,KAAK,IAAI,KAAK,kBAAkB,IAAI;AACtD,WAAO,IAAI;AAAA,EACb;AAAA,EAEA,MAAM,YAAY,IAAY;AAC5B,UAAM,MAAM,MAAM,KAAK,IAAI,IAAI,SAAS,EAAE,EAAE;AAC5C,WAAO,IAAI;AAAA,EACb;AAAA,EAEA,MAAM,kBAAkB,YAAoB;AAC1C,UAAM,MAAM,MAAM,KAAK,IAAI,IAAI,qBAAqB,UAAU,EAAE;AAChE,WAAO,IAAI;AAAA,EACb;AAAA;AAAA,EAGA,MAAM,UAAU,QAAuD;AACrE,UAAM,MAAM,MAAM,KAAK,IAAI,IAAI,UAAU,EAAE,OAAO,CAAC;AACnD,WAAO,IAAI;AAAA,EACb;AAAA,EAEA,MAAM,aAAa,MAAyD;AAC1E,UAAM,MAAM,MAAM,KAAK,IAAI,KAAK,mBAAmB,IAAI;AACvD,WAAO,IAAI;AAAA,EACb;AAAA,EAEA,MAAM,gBAAgB,QAAgB,QAAQ,IAAI;AAChD,UAAM,MAAM,MAAM,KAAK,IAAI,IAAI,mBAAmB,MAAM,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC;AACjF,WAAO,IAAI;AAAA,EACb;AAAA;AAAA,EAGA,MAAM,UAAU,aAAa,MAAM;AACjC,UAAM,MAAM,MAAM,KAAK,IAAI,IAAI,UAAU,EAAE,QAAQ,EAAE,WAAW,EAAE,CAAC;AACnE,WAAO,IAAI;AAAA,EACb;AAAA,EAEA,MAAM,QAAQ,MAA0D;AACtE,UAAM,MAAM,MAAM,KAAK,IAAI,KAAK,cAAc,IAAI;AAClD,WAAO,IAAI;AAAA,EACb;AAAA,EAEA,MAAM,aAAa,QAAgB;AACjC,UAAM,MAAM,MAAM,KAAK,IAAI,IAAI,cAAc,MAAM,EAAE;AACrD,WAAO,IAAI;AAAA,EACb;AAAA;AAAA,EAGA,MAAM,YAAY,MAA0C;AAC1D,UAAM,MAAM,MAAM,KAAK,IAAI,KAAK,UAAU,IAAI;AAC9C,WAAO,IAAI;AAAA,EACb;AAAA,EAEA,MAAM,UAAU,QAAgB;AAC9B,UAAM,MAAM,MAAM,KAAK,IAAI,IAAI,UAAU,MAAM,EAAE;AACjD,WAAO,IAAI;AAAA,EACb;AACF;","names":[]}